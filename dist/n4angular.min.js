"use strict";!function(n){n.module("n4AuthenticationInterceptor",[]).config(["$httpProvider",function(n){n.interceptors.unshift("n4AuthenticationInterceptor")}]).provider("n4AuthenticationInterceptor",[function(){var n=this;n.redirectURL=void 0,n.notAuthenticatedMessage="Usuário não autenticado.",n.statusHttp=401,n.$get=["$q","$window","$log",function(t,e,i){return{responseError:function(o){return o.status===n.statusHttp&&(i.error(n.notAuthenticatedMessage),e.location.replace(n.redirectURL)),t.reject(o)}}}]}])}(angular),!function(n){n.module("n4CpfCnpjFilter",[]).filter("CpfCnpj",function(){return function(n){if(!n)return"";var t=n.replace(/\D/g,"");return 14===t.length?t.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):11===t.length?t.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):""}})}(angular),!function(n){n.module("n4CodigoFilter",[]).filter("Codigo",function(){return function(n,t,e){if(!n)return"";if(isNaN(n))return n;for(n=n.toString().trim(),t=t||6,e=e||"0";n.length<t;)n=e+n;return n}})}(angular),!function(n){n.module("n4DateInput",[]).directive("n4DateInput",["$filter",function(n){return{require:"ngModel",restrict:"EAC",replace:!0,template:'<input type="text">',link:function(t,e,i,o){var r=function(t){if(!t)return"";var e,o,r,a=function(t){return isNaN(t)?"":n("date")(t,"dd/MM/yyyy")};return t instanceof Date?a(t):(e=t.replace(/\D/gi,""),o=new RegExp("^(\\d{2})(\\d{2})(\\d{2})$","gi"),o.test(e)?(r=new Date(e.replace(o,"$2/$1/"+(i.century||"20")+"$3")),a(r)):(o=new RegExp("^(\\d{2})(\\d{2})(\\d{4})$","gi"),o.test(e)?(r=new Date(e.replace(o,"$2/$1/$3")),a(r)):(o=new RegExp("^\\w{3} \\w{3} \\d{1,2} \\d{4} .*$","gi"),o.test(t)?a(new Date(t)):t)))},a=function(n){var t=r(n),e=new RegExp("^(\\d{2})/(\\d{2})/(\\d{4})$","gi");return e.test(t)?new Date(t.replace(e,"$2/$1/$3")):null};e.attr("placeholder")||e.attr("placeholder","00/00/0000"),e.attr("maxlength",10),o.$formatters.push(r),o.$parsers.push(a)}}}])}(angular),!function(n){n.module("n4ExceptionInterceptor",[]).config(["$httpProvider",function(n){n.interceptors.unshift("n4ExceptionInterceptor")}]).provider("n4ExceptionInterceptor",[function(){var n=this;n.errorMessage="Serviço indisponível, tente novamente.",n.$get=["$q","$window","$log",function(t,e,i){return{responseError:function(e){return e.status=e.status||400,e.data?t.reject(angular.extend(new TypeError(e.data),{status:e.status})):(i.error(e),t.reject(angular.extend(new TypeError(n.errorMessage),{status:e.status})))}}}]}])}(angular),!function(n){n.module("n4FileSizeFilter",[]).filter("FileSize",["numberFilter",function(n){return function(t,e){if(isNaN(parseFloat(t))||!isFinite(t))return 0;e=e||1;var i=["bytes","KB","MB","GB","TB","PB"],o=Math.floor(Math.log(t)/Math.log(1024));return n(t/Math.pow(1024,Math.floor(o)),e)+" "+i[o]}}])}(angular),!function(n){n.module("n4FileUpload",["n4FileUpload.services","n4FileUpload.directives"])}(angular),function(n){n.module("n4FileUpload.directives",["n4FileUpload.services"]).directive("n4FileUploadDirective",["$timeout","n4FileUploadService","$q","$log",function(n,t,e,i){return{require:"ngModel",restrict:"AE",replace:!0,transclude:!0,scope:{onStart:"&",onFinish:"&"},template:["<div>",'  <label class="bt">','    <span ng-transclude=""></span>','    <input class="bt-input" type="file"/>',"  </label>",'  <ul class="files">','    <li ng-repeat="file in files">','      <span ng-bind="file.name"></span>','      <span ng-bind="file.progress"></span>',"    </li>","  <ul>","</div>"].join(""),link:function(n,o,r,a){var c=o.find("input");r.multiple&&c.attr("multiple","multiple"),n.files=[],c.on("change",function(r){n.onStart(),o.addClass("sending"),c.prop("disabled",!0);for(var l,s=[],u=r.target.files,f=u.length-1;f>=0;f-=1)n.files.push(u[f]),l=t.send(u[f]).then(null,function(n){i.error(n)},function(n){var t=n.config.file;t.progress=parseInt(100*n.loaded/n.total,10)+"%"}),s.push(l);e.all(s).then(function(n){var t=n.map(function(n){return n.data[0]});a.$setViewValue(t)})["finally"](function(){o.removeClass("sending"),c.prop("disabled",!1),n.onFinish()})}),n.$on("$destroy",function(){c.off("change")})}}}])}(angular),function(n){n.module("n4FileUpload.services",["ngFileUpload"]).provider("n4FileUploadService",function(){var n=this;this.endpoint="",this.$get=["Upload",function(t){return{send:function(e,i){return t.upload({url:i||n.endpoint,file:e})}}}]})}(angular),!function(n){n.module("n4Modal",[]).directive("n4Modal",["$timeout",function(n){return{restrict:"A",transclude:!0,replace:!0,scope:{visible:"=n4Modal"},template:'<div class="n4-modal"><div class="n4-modal-container" ng-transclude=""></div><div class="n4-modal-background"></div></div>',link:function(t,e){var i=t.$watch("visible",function(n){n?e.addClass("visible"):e.removeClass("visible")});e.on("click",".n4-modal-background, .n4-modal-close",function(){n(function(){t.visible=!1})}),t.$on("$destroy",function(){e.off("click"),i()})}}}])}(angular),!function(n){n.module("n4Notifications.models",[]).factory("N4NotificationModel",function(){var n=function(n){this.type="information",this.message=null,this.primaryButtonText=null,this.secondaryButtonText=null,this.callback=null,angular.extend(this,n)};return n})}(angular),function(n){n.module("n4Notifications",["ngAnimate","n4Notifications.directives","n4Notifications.models","n4Notifications.services"])}(angular),function(n){n.module("n4Notifications.directives",["n4Notifications.models","n4Notifications.services"]).directive("n4Notifications",["n4NotificationsService",function(n){return{restrict:"E",replace:!0,scope:{},template:['<div class="notifications">','  <div class="notification" ng-class="notification.type" ng-repeat="notification in service.notifications">','    <div class="text" data-ng-bind="notification.message"></div>','    <div class="actions">','      <a class="secondary" href="" data-ng-if="notification.secondaryButtonText" data-ng-bind="notification.secondaryButtonText" data-ng-click="notification.callback(notification.secondaryButtonText)"></a>','      <a class="primary" href="" data-ng-bind="notification.primaryButtonText" data-ng-click="notification.callback(notification.primaryButtonText)"></a>',"    </div>","</div>","</div>"].join(""),link:function(t){t.service=n}}}])}(angular),function(n){n.module("n4Notifications.services",["n4Notifications.models"]).service("n4NotificationsService",["N4NotificationModel","$q","$timeout",function(n,t,e){var i=function(){this.notifications=[]};return i.prototype={notify:function(i,o,r,a,c){var l,s=this,u=t.defer(),f=new n({type:i,message:o,primaryButtonText:r,secondaryButtonText:a,callback:function(n){e.cancel(l),s.notifications.splice(s.notifications.indexOf(this),1),n=n||this.primaryButtonText,u.resolve(n),c&&c(n)}});return a||(l=e(function(){f.callback(r)},15e3)),this.notifications.unshift(f),u.promise},notifySuccess:function(n,t,e,i){return this.notify("success",n,t,e,i)},notifyInformation:function(n,t,e){return this.notify("information",n,t,null,e)},notifyAlert:function(n,t,e,i){return this.notify("alert",n,t,e,i)}},new i}])}(angular),!function(n){n.module("n4NumberInput",[]).directive("n4NumberInput",[function(){return{require:"ngModel",restrict:"EAC",replace:!0,template:'<input type="text">',link:function(n,t,e,i){var o=function(n){return n?n.trim().replace(/[^0-9]/g,""):""},r=function(n){var t=o(n);return t!==n&&(i.$setViewValue(t),i.$render()),t};i.$formatters.unshift(r),i.$parsers.unshift(r)}}}])}(angular),!function(n){n.module("n4OnBottom",[]).directive("n4OnBottom",["$document","$window","$timeout",function(n,t,e){return{restrict:"A",scope:{onBottom:"&n4OnBottom"},compile:function(i,o){return function(i,o,r){r.$observe("onWindowBottom",function(r){/true/i.test(r)?(o.off("scroll"),$(t).on("scroll",function(){$(t).scrollTop()+$(t).height()===$(n).height()&&e(i.onBottom)})):($(t).off("scroll"),o.on("scroll",function(){o.scrollTop()+o.innerHeight()>=this.scrollHeight&&e(i.onBottom)}))}),i.$on("$destroy",function(){o.off("scroll"),$(t).off("scroll")})}}}}])}(angular),function(n){n.module("n4-angular.interceptors",["n4ExceptionInterceptor","n4AuthenticationInterceptor"]),n.module("n4-angular.filters",["n4FileSizeFilter","n4CodigoFilter","n4CpfCnpjFilter"]),n.module("n4-angular.directives",["n4Notifications","n4Modal","n4OnBottom","n4DateInput","n4NumberInput","n4FileUpload"]),n.module("n4-angular",["n4-angular.interceptors","n4-angular.filters","n4-angular.directives"])}(angular);